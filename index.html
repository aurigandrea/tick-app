<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consent Recording App</title>
    <link rel="stylesheet" href="styles.css?v=20251106-0500">
    <script type="text/javascript" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Login Screen -->
        <div id="login-screen" class="auth-section">
            <h1>üîí Secure Consent App</h1>
            <p>Please authenticate to access the consent recording system.</p>
            <div class="login-container">
                <button onclick="window.netlifyIdentity.open()" class="simple-login-btn">
                    Log In
                </button>
            </div>
        </div>

        <!-- Main App (hidden until authenticated) -->
        <div id="main-app" class="app-section" style="display: none;">
            <header>
                <h1>‚òëÔ∏è Consent App</h1>
                <div class="user-info">
                    <span id="user-email"></span>
                    <button id="logout-btn" class="logout-btn">Logout</button>
                </div>
            </header>

            <!-- Navigation -->
            <nav class="nav-tabs">
                <button id="record-tab" class="tab-btn active">Record Consent</button>
                <button id="request-tab" class="tab-btn">Request Consent</button>
                <button id="view-tab" class="tab-btn">View Records</button>
            </nav>

            <!-- Record Consent Tab -->
            <div id="record-section" class="tab-content active">
                <div class="consent-prompt">
                    <h3>What are you giving consent to?</h3>
                    <p>By proceeding, you acknowledge that you understand and agree to the following:</p>
                    <ul>
                        <li>Your consent information will be securely recorded</li>
                        <li>This record serves as proof of your agreement</li>
                        <li>You may revoke consent at any time by contacting the administrator but it might be too late</li>
                    </ul>
                </div>

                <!-- Consent Requests for You -->
                <div class="pending-requests">
                    <h3>üì¨ Consent Requests for You</h3>
                    <div id="received-requests-list" class="pending-list">
                        <!-- Received requests will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Request Consent Tab -->
            <div id="request-section" class="tab-content">
                <div class="request-form">
                    <h2>üì§ Request Consent from Others</h2>
                    <p style="color: #718096; margin-bottom: 30px;">Send a consent request that others can respond to by logging in</p>
                    
                    <form id="request-form">
                        <div class="form-group">
                            <label for="request-recipient-name">Recipient Name *</label>
                            <input type="text" id="request-recipient-name" name="request-recipient-name" 
                                   placeholder="Name of the person" required>
                        </div>

                        <div class="form-group">
                            <label for="request-recipient-email">Recipient Email *</label>
                            <input type="email" id="request-recipient-email" name="request-recipient-email" 
                                   placeholder="email@example.com" required>
                        </div>

                        <div class="form-group">
                            <label for="request-activity">Activity Requiring Consent *</label>
                            <textarea id="request-activity" name="request-activity" rows="4" 
                                      placeholder="Describe what you need consent for..." required></textarea>
                        </div>

                        <div class="form-group">
                            <label for="request-details">Additional Details</label>
                            <textarea id="request-details" name="request-details" rows="3" 
                                      placeholder="Any additional information or context..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="request-deadline">Response Deadline (Optional)</label>
                            <input type="date" id="request-deadline" name="request-deadline">
                        </div>

                        <button type="submit" class="submit-btn">üì§ Send Consent Request</button>
                    </form>
                </div>
            </div>

            <!-- View Records Tab -->
            <div id="view-section" class="tab-content">
                <div class="records-view">
                    <h2>üîç All Consent Records</h2>
                    <p style="color: #718096; margin-bottom: 20px;">View all recorded consent submissions from all users</p>
                    <div class="records-filter">
                        <input type="text" id="search-filter" placeholder="Search by name, activity, or user email...">
                    </div>
                    <div id="records-list" class="records-list">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js?v=20251106-0620"></script>
</body>
</html>